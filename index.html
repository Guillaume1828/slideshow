<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Slideshow</title>
  <style>
    body { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; background: #000; }
    img { max-width: 100%; max-height: 80vh; object-fit: contain; }
    #progress { color: white; margin-top: 10px; font-size: 20px; }
    button { margin: 10px; padding: 10px 20px; font-size: 16px; }
  </style>
</head>
<body>
  <img id="slideshow" src="" />
  <div id="progress">0/0</div>
  <div>
    <button onclick="togglePlayPause()">⏯️</button>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const images = [];
    const times = [];
    for (let i = 1; ; i++) {
      const img = urlParams.get(`img${i}`);
      const t = parseInt(urlParams.get(`t${i}`));
      if (!img) break;
      images.push(img);
      times.push(isNaN(t) ? 3000 : t);
    }

    const imgElement = document.getElementById("slideshow");
    const progress = document.getElementById("progress");
    let index = 0;
    let playing = true;
    let interval = null;

    function showImage(i) {
      imgElement.src = images[i];
      progress.textContent = `Posture ${i + 1}/${images.length}`;
    }

    function startSlideshow() {
      showImage(index);
      interval = setInterval(() => {
        index = (index + 1) % images.length;
        showImage(index);
      }, times[index]);
    }

    function stopSlideshow() {
      clearInterval(interval);
    }

    function togglePlayPause() {
      playing = !playing;
      if (playing) startSlideshow();
      else stopSlideshow();
    }

    if (images.length > 0) startSlideshow();
    else document.body.innerHTML = "<h2 style='color:white;'>Aucune image trouvée dans l’URL.</h2>";
  </script>
</body>
</html>
